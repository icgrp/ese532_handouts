
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>5.2. Setup and Walk-through &#8212; ESE532 Handouts Fall 2021</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.3. Homework Submission" href="homework_submission.html" />
    <link rel="prev" title="5.1. Collaboration" href="collaboration.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/penn_engineering.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">ESE532 Handouts Fall 2021</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Overview
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://www.seas.upenn.edu/~ese532/fall2021/fall2021.html">
   Syllabus
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../writeup_guidelines.html">
   Writeup Guidelines
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Homework Assignments
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../hw1/index.html">
   1. Remember C
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw1/collaboration.html">
     1.1. Collaboration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw1/walk_through.html">
     1.2. Getting Started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw1/makefile_tutorial.html">
     1.3. Makefile Tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw1/gdb_tutorial.html">
     1.4. GDB Tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw1/c_refresher.html">
     1.5. C Refresher
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw1/debug_app.html">
     1.6. Debug an Application
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw1/homework_submission.html">
     1.7. Homework Submission
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../hw2/index.html">
   2. Profiling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw2/collaboration.html">
     2.1. Collaboration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw2/walk_through.html">
     2.2. Setup and Walk-through
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw2/homework_submission.html">
     2.3. Homework Submission
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../hw3/index.html">
   3. Thread Parallel
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw3/collaboration.html">
     3.1. Collaboration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw3/walk_through.html">
     3.2. Setup and Walk-through
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw3/homework_submission.html">
     3.3. Homework Submission
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../hw4/index.html">
   4. SIMD
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw4/collaboration.html">
     4.1. Collaboration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw4/walk_through.html">
     4.2. Setup and Walk-through
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw4/homework_submission.html">
     4.3. Homework Submission
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   5. Accelerator
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="collaboration.html">
     5.1. Collaboration
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     5.2. Setup and Walk-through
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="homework_submission.html">
     5.3. Homework Submission
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../hw6/index.html">
   6. Accelerator Interface
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw6/collaboration.html">
     6.1. Collaboration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw6/walk_through.html">
     6.2. Setup and Walk-through
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw6/homework_submission.html">
     6.3. Homework Submission
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../hw7/index.html">
   7. Restructuring C for Accelerator and Zynq Transition
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw7/collaboration.html">
     7.1. Collaboration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw7/walk_through.html">
     7.2. Setup and Walk-through
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../hw7/homework_submission.html">
     7.3. Homework Submission
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/hw5/walk_through.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/icgrp/ese532_handouts"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/icgrp/ese532_handouts/issues/new?title=Issue%20on%20page%20%2Fhw5/walk_through.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/icgrp/ese532_handouts/edit/master/ese532_handouts/hw5/walk_through.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hardware-acceleration">
   5.2.1. Hardware Acceleration
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installing-vitis-2020-2-on-your-personal-computer-linux-os">
     5.2.1.1. Installing Vitis 2020.2 on your Personal Computer(Linux OS)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#obtaining-and-running-the-code">
     5.2.1.2. Obtaining and Running the Code
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-vitis-hls">
     5.2.1.3. Using Vitis HLS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-vitis-project">
     5.2.1.4. Creating Vitis Project
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#environment-setup">
   5.2.2. Environment Setup
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-up-ultra96-and-host-computer">
     5.2.2.1. Setting up Ultra96 and Host Computer
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#run-on-the-fpga">
     5.2.2.2. Run on the FPGA
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#write-the-sd-card-image-one-time-setup">
       5.2.2.2.1. Write the SD Card Image (one time setup)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#boot-the-ultra96">
       5.2.2.2.2. Boot the Ultra96
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#boot-the-ultra96-for-windows-users-only">
       5.2.2.2.3. Boot the Ultra96 (for Windows users only)
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reference">
   5.2.3. Reference
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="setup-and-walk-through">
<h1><span class="section-number">5.2. </span>Setup and Walk-through<a class="headerlink" href="#setup-and-walk-through" title="Permalink to this headline">¶</a></h1>
<!-- ```{include} ../common/aws_caution.md
``` -->
<style type="text/css">
    table { width: 100%; }
    th { background-color: #4CAF50;color: white;height:50px;text-align: center; }
    td {height:50px;text-align: center;}
    tr:nth-child(even) {background-color: #f2f2f2;}
</style>
<div class="section" id="hardware-acceleration">
<h2><span class="section-number">5.2.1. </span>Hardware Acceleration<a class="headerlink" href="#hardware-acceleration" title="Permalink to this headline">¶</a></h2>
<p>To implement a hardware function, it will ultimately be necessary
to perform low-level placement and routing of the hardware onto the
FPGA substrate.  That is, the tools must decide which particular instance of
each primitive is used (placement) or which wires to use for connections
(routing).  These tasks are typically much slower (at least 20 minutes, can take
hours) than the compilation time for software (a few minutes).  This means you
will need to plan your time carefully for this lab and for subsequent labs.
One way to optimize our development time is to be careful about when we
invoke low-level placement and routing and when we can avoid it.   This lab
and next will show you a few techniques that allow you to reduce the number of
times you need to invoke low-level placement and routing and introduce
simulation and emulation you can use validate your design before
invoking low-level placement and routing.</p>
<p>In the homework, you could either use linux machines in Detkin/Ketterer or
install Vitis locally. If you want to install Vitis locally, we expect that your computer has at least:</p>
<ul class="simple">
<li><p>Linux OS</p></li>
<li><p>16 GB RAM</p></li>
<li><p>4 cores</p></li>
<li><p>70 GB free hard disk space
If you want to install Vitis locally, follow the instructions in
<a class="reference internal" href="#install-locally"><span class="std std-ref">Installing Vitis 2020.2 on your Personal Computer(Linux OS)</span></a>. If you want to use Detkin/Ketterer machines,
jump to <a class="reference internal" href="#software-code"><span class="std std-ref">Obtaining and Running the Code</span></a>.</p></li>
</ul>
<div class="section" id="installing-vitis-2020-2-on-your-personal-computer-linux-os">
<span id="install-locally"></span><h3><span class="section-number">5.2.1.1. </span>Installing Vitis 2020.2 on your Personal Computer(Linux OS)<a class="headerlink" href="#installing-vitis-2020-2-on-your-personal-computer-linux-os" title="Permalink to this headline">¶</a></h3>
<!-- Running Vitis on your local computer will likely be the best interactive
experience with the GUI.  However, it will take more time and effort (and
disk space) to get it setup.  Ultimately, we recommend you set it up, but
the other two options means that getting it setup on your local computer
does not need to be in your critical path to starting to use the Ultra96. -->
<!-- Note that Vitis only supports Windows and Linux. Although
you can use Windows, we strongly suggest you install linux,
since we developed our homework code on Linux (Ubuntu 20.04). 
We won't be able to
help you if you encounter unexpected bugs and issues with tools
that may arise from using a different OS. For MacOS users,
you have no choice other than installing Vitis in a Virtual Machine. Following are two tutorials we have on setting up
a virtual machine. Use Ubuntu 20.04 and the use the instructions
below to install Vitis (the tutorials install SDSoC and you should not install that) on your virtual machine:
- [ESE532 SDSoC on Parallels Desktop](https://youtu.be/HaOWfmCAyCE)
- [ESE532 SDSoC on Virtual Box](https://docs.google.com/document/d/1XKVsD3gt8NeJgvcykNxD37CZME8r-dkUBl1D8KESYZk/edit?usp=sharing) -->
<p>Note that Vitis is fully supported in Linux OS only.
Follow the instructions below to install Vitis on your linux machine:</p>
<ol>
<li><p>Download
<em><strong>Xilinx Unified Installer 2020.2: Linux Self Extracting Web Installer</strong></em> in
<a class="reference external" href="https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vitis/2020-2.html">here</a>. Create an account with Xilinx if you don’t have one.</p></li>
<li><p>Open a terminal and use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">Xilinx_Unified_2020</span><span class="mf">.2_1118_1232</span><span class="n">_Lin64</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
</li>
<li><p>Extract the installer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">Xilinx_Unified_2020</span><span class="mf">.2_1118_1232</span><span class="n">_Lin64</span><span class="o">.</span><span class="n">bin</span> <span class="o">--</span><span class="n">noexec</span> <span class="o">--</span><span class="n">target</span> <span class="o">./</span><span class="n">xilinx</span><span class="o">-</span><span class="n">installer</span>
</pre></div>
</div>
</li>
<li><p>Login with your Xilinx account:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xsetup</span> <span class="o">-</span><span class="n">b</span> <span class="n">AuthTokenGen</span>
</pre></div>
</div>
<p>Type the email you have registered for xilinx and press enter.
Type the password and press enter - the command from step 4 completes with <code class="docutils literal notranslate"><span class="pre">Saved</span> <span class="pre">authentication</span> <span class="pre">token</span> <span class="pre">file</span> <span class="pre">successfully</span></code>.</p>
</li>
<li><p>Save the attached <a class="reference download internal" download="" href="../_downloads/c4d61b6e5cc5af72d7c4fdac5f9f720e/ese532_install_config.txt"><code class="xref download docutils literal notranslate"><span class="pre">ese532_install_config.txt</span></code></a> and add your preferred installation location in the <code class="docutils literal notranslate"><span class="pre">Destination</span></code> field. The default location is <code class="docutils literal notranslate"><span class="pre">/opt/Xilinx</span></code>.</p></li>
<li><p>Start the installation with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">xsetup</span> <span class="o">-</span><span class="n">b</span> <span class="n">Install</span> <span class="o">-</span><span class="n">a</span> <span class="n">XilinxEULA</span><span class="p">,</span><span class="mi">3</span><span class="n">rdPartyEULA</span><span class="p">,</span><span class="n">WebTalkTerms</span> <span class="o">-</span><span class="n">c</span> <span class="n">ese532_install_config</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The full installation will take about 30 min - 1 hour.</p>
</li>
<li><p>Open the file <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> in your terminal and add the following line. This is the license for using Vitis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">LM_LICENSE_FILE</span><span class="o">=</span><span class="s2">&quot;2100@potato.cis.upenn.edu;1709@potato.cis.upenn.edu;1717@potato.cis.upenn.edu;27010@potato.cis.upenn.edu;27009@potato.cis.upenn.edu&quot;</span>
</pre></div>
</div>
<p>Do <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code> to update the terminal environment
with this variable.</p>
</li>
<li><p>You might need to issue the following commands if you encounter an error with <code class="docutils literal notranslate"><span class="pre">libtinfo</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">libtinfo</span><span class="o">-</span><span class="n">dev</span>
<span class="n">sudo</span> <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">libtinfo</span><span class="o">.</span><span class="n">so</span><span class="mf">.6</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">libtinfo</span><span class="o">.</span><span class="n">so</span><span class="mf">.5</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="obtaining-and-running-the-code">
<span id="software-code"></span><h3><span class="section-number">5.2.1.2. </span>Obtaining and Running the Code<a class="headerlink" href="#obtaining-and-running-the-code" title="Permalink to this headline">¶</a></h3>
<p>In this homework, we will first run a matrix multiplication function on the cpu and then run the same matrix multiplication
function on the FPGA.</p>
<p>Pull in the latest changes using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">ese532_code</span><span class="o">/</span>
<span class="n">git</span> <span class="n">pull</span> <span class="n">origin</span> <span class="n">master</span>
</pre></div>
</div>
<p>The code you will use for <a class="reference internal" href="homework_submission.html"><span class="doc std std-doc">homework submission</span></a>
is in the <code class="docutils literal notranslate"><span class="pre">hw5</span></code> directory. The directory structure looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hw5</span><span class="o">/</span>
    <span class="n">sourceMe</span><span class="o">.</span><span class="n">sh</span>
    <span class="n">xrt</span><span class="o">.</span><span class="n">ini</span>
    <span class="n">common</span><span class="o">/</span>
        <span class="n">Constants</span><span class="o">.</span><span class="n">h</span>
        <span class="n">EventTimer</span><span class="o">.</span><span class="n">h</span>
        <span class="n">EventTimer</span><span class="o">.</span><span class="n">cpp</span>
        <span class="n">Utilities</span><span class="o">.</span><span class="n">cpp</span>
        <span class="n">Utilities</span><span class="o">.</span><span class="n">h</span>
    <span class="n">hls</span><span class="o">/</span>
        <span class="n">MatrixMultiplication</span><span class="o">.</span><span class="n">h</span>
        <span class="n">MatrixMultiplication</span><span class="o">.</span><span class="n">cpp</span>
        <span class="n">Testbench</span><span class="o">.</span><span class="n">cpp</span>
    <span class="n">Host</span><span class="o">.</span><span class="n">cpp</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sourceMe.sh</span></code> will help you to source Xilins tools</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xrt.ini</span></code> defines the options necessary for Vitis Analyzer.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">common</span></code> folder has header files and helper functions.</p></li>
<li><p>You will mostly be working with the code in the <code class="docutils literal notranslate"><span class="pre">hls</span></code> folder. The
<code class="docutils literal notranslate"><span class="pre">hls/MatrixMultiplication.cpp</span></code> file has the function that gets compiled
to a hardware function (known as a kernel in Vitis). The <code class="docutils literal notranslate"><span class="pre">Host.cpp</span></code> file has
the “driver” code that transfers the data to the fpga, runs the kernel,
fetches back the result from the kernel and then verifies it for correctness.</p></li>
<li><p>Read <a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/2020.2/Getting_Started/Vitis/Part3.md#the-source-code-for-the-vector-add-kernel">this</a> to learn about the syntax of the code in <code class="docutils literal notranslate"><span class="pre">hls/MatrixMultiplication.cpp</span></code>.</p></li>
<li><p>Read <a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/2020.2/Getting_Started/Vitis/Part3.md#the-source-code-for-the-host-program">this</a> to learn about how the hardware function is
utilized in <code class="docutils literal notranslate"><span class="pre">Host.cpp</span></code></p></li>
<li><p>Read <a class="reference external" href="https://developer.xilinx.com/en/articles/example-1-simple-memory-allocation.html">this</a> to learn about simple memory allocation and OpenCL execution.</p></li>
<li><p>Read <a class="reference external" href="https://developer.xilinx.com/en/articles/example-3-aligned-memory-allocation-with-opencl.html">this</a> to learn about aligned memory allocation with OpenCL.</p></li>
</ul>
<!-- - Run the matrix multiplication on the cpu by doing:
    ```
    # compile
    source $AWS_FPGA_REPO_DIR/vitis_setup.sh
    export PLATFORM_REPO_PATHS=$(dirname $AWS_PLATFORM)
    make all TARGET=sw_emu

    # run
    source $AWS_FPGA_REPO_DIR/vitis_runtime_setup.sh
    export XCL_EMULATION_MODE=sw_emu
    ./host mmult.xclbin
    ```
- We will now use Vitis Analyzer to view the trace of our matrix multiplication on cpu
    and find out how long each API call took.
    1. Read about how to use Vitis Analyzer from [here](https://github.com/Xilinx/Vitis-Tutorials/blob/master/Getting_Started/Vitis/Part5.md).
<!--     1. Open a remote desktop session on your `z1d.2xlarge` instance. -->
<!--     1. Run `vitis_analyzer ./xclbin.run_summary` to open Vitis Analyzer and try to associate the api calls with the code in `Host.cpp`.
    1. Hover over an API call to find out long it took.
 -->
<p>We are now going to start working on the <a class="reference internal" href="homework_submission.html"><span class="doc">Homework Submission</span></a> where we will follow a bottom-up approach and optimize
our hardware function using Vitis HLS IDE first and then re-compile it and run it on the FPGA in the end.
Scroll to <a class="reference internal" href="#vitis-hls"><span class="std std-ref">Using Vitis HLS</span></a> to learn about how to use Vitis HLS.</p>
<p>Once you have 3i completed from the <a class="reference internal" href="homework_submission.html"><span class="doc">Homework Submission</span></a>,
proceed <a class="reference internal" href="#vitis"><span class="std std-ref">Creating Vitis Project</span></a>.</p>
<hr class="docutils" />
</div>
<div class="section" id="using-vitis-hls">
<span id="vitis-hls"></span><h3><span class="section-number">5.2.1.3. </span>Using Vitis HLS<a class="headerlink" href="#using-vitis-hls" title="Permalink to this headline">¶</a></h3>
<p>Creating a new project in Vitis HLS is explained <a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/2020.2/Getting_Started/Vitis_HLS/new_project.md#1-creating-a-vitis-hls-project">here</a>.
Make sure you enter the top-level function during the creation of the
project (although you can also change it later). The top-level function is
the function that will be called by the part of your application that runs
in software.  Vitis HLS needs it for synthesis.  You can also indicate
which files you want to create.  It is wise to add a testbench file too,
while you are creating the project.</p>
<p>We have provided a testbench in Vitis HLS to debug the hardware.
The requirements for testbenches are not any different from other
software applications written in C.  Similar to them, testbenches
have a <code class="docutils literal notranslate"><span class="pre">main</span></code> function that is invoked.  To the main function you can
add any functionality needed to test your function.  That includes calling
the top function that you would like to test.  When the testbench is
satisfied that the function is correct, it should return 0.  Otherwise, it
should return another value.</p>
<p>You can run the testbench by selecting <em><strong>Project</strong></em> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <em><strong>Run C Simulation</strong></em> from the menu.  A window should pop up.  The default settings of the dialog
should be fine.  You can dismiss the dialog by pressing <em><strong>OK</strong></em>.  You
can see in the <em><strong>Console</strong></em> whether your test has passed.  If your test
fails, you can run the test in debug mode.  This can be done by repeating
the same procedure, except that you should check the box in front of
<em><strong>Launch Debugger</strong></em> this time before you dismiss the dialog.  This
will take you to the <em><strong>Debug</strong></em> perspective, where you can set breakpoints and use the step into/step over buttons to debug.  You can go back to the original perspective by pressing the <em><strong>Synthesis</strong></em> button in the top, right corner.</p>
<p>To rebuild the code, you should go back to Synthesis mode, and click <em><strong>Run C Simulation</strong></em> again to rebuild the code.</p>
<p>Once you are satisfied with your code, you can run <em><strong>Solution</strong></em>
<span class="math notranslate nohighlight">\(\rightarrow\)</span> <em><strong>Run C Synthesis</strong></em> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <em><strong>Active Solution</strong></em> from the menu
to synthesize your design.  You can also verify the synthesized version of
your accelerator in your testbench.  If you choose to do so, Vitis HLS
will run your accelerator in a simulator, so this method is called C/RTL
Cosimulation.  The employed cycle-level simulation is much slower than
realtime execution, so this method may not be
practical for every testbench.  It avoids needing to run low
level-placement and routing and will give you more visibility into the
behavior of your design.  Anyway, you can start it by choosing
<em><strong>Solution</strong></em> <span class="math notranslate nohighlight">\(\rightarrow\)</span> <em><strong>Run C/RTL Cosimulation</strong></em> from the menu.</p>
<p>The hardware implementation that Vitis HLS selects can be controlled
by including pragmas, e.g. <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">HLS</span> <span class="pre">inline</span></code>, in your code.
The different pragmas that you can use in your functions are listed in <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/hls_pragmas.html#okr1504034364623">Vitis HLS User Guide</a>.</p>
<p>When you have obtained a satisfying hardware description in Vitis HLS, you will <a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/blob/2020.2/Getting_Started/Vitis_HLS/dataflow_design.md#export-the-vitis-kernel">Export Vitis Kernel</a>, i.e. a Xilinx object file (.xo).</p>
<!-- We will then [use this object file/kernel](https://github.com/Xilinx/Vitis-In-Depth-Tutorial/blob/master/Getting_Started/Vitis_HLS/using_the_kernel.md) and link it together in our existing Vitis application. -->
<!-- ```{note}
We are using the GUI mode of Vitis HLS so that we can see the HLS schedule.
In this class, our preferred method of compiling is using the command line
and we'll only use GUI when it's required.

If your remote desktop connection is lagging, you can run Vitis HLS
from the command line using the script, `export_hls_kernel.sh`, 
in the `hw5/hls` directory. This script runs the TCL script, `run_hls.tcl`, 
with Vitis HLS. Vitis HLS GUI actually calls the commands in this TCL script.
If you look inside the TCL script, you can relate it to the GUI steps
we mentioned above. Additionally, you can learn more about the TCL commands
from:
- <https://www.xilinx.com/html_docs/xilinx2020_1/vitis_doc/tre1585063528538.html>
- <https://www.xilinx.com/html_docs/xilinx2020_1/vitis_doc/nfj1539734250759.html>

Note that the only way to see the HLS schedule is through the GUI.
So collaborate with your partner if you are unable to use the GUI in AWS or try
to [install Vitis toolchain locally](https://github.com/Xilinx/Vitis-In-Depth-Tutorial/blob/master/Getting_Started/Vitis/Part2.md#vitis-flow-101--part-2--installation-guide).
``` -->
</div>
<div class="section" id="creating-vitis-project">
<span id="vitis"></span><h3><span class="section-number">5.2.1.4. </span>Creating Vitis Project<a class="headerlink" href="#creating-vitis-project" title="Permalink to this headline">¶</a></h3>
<p>Make sure you have 3i completed from the <a class="reference internal" href="homework_submission.html"><span class="doc">Homework Submission</span></a>.</p>
<ul>
<li><p>First, cd to the HW5 directory and source settings to be able to run vitis:
<code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">sourceMe.sh</span></code>. If you work locally, source <code class="docutils literal notranslate"><span class="pre">settings64.sh</span></code> in vitis
installation directory.</p></li>
<li><p>Start Vitis by <code class="docutils literal notranslate"><span class="pre">vitis</span> <span class="pre">&amp;</span></code> in the terminal. You should now see the IDE.</p></li>
<li><p>Select Workspace as you want and click <em><strong>Launch</strong></em>.</p></li>
<li><p>Select <em><strong>Create Application Project</strong></em>.</p></li>
<li><p>You will see Ultra96 platform as shown below. Click <em><strong>Next</strong></em>.</p>
<div class="figure align-default" id="id1">
<img alt="../_images/vitis_ultra96_platform.png" src="../_images/vitis_ultra96_platform.png" />
<p class="caption"><span class="caption-number">Fig. 5.1 </span><span class="caption-text">Select Ultra96 platform</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Set project name as you want. e.g. hw5_vitis. Then, click <em><strong>Next</strong></em>.</p></li>
<li><p>You will see Sysroot path, Root FS, and Kernel Image are already set.
Click <em><strong>Next</strong></em>.</p>
<div class="figure align-default" id="id2">
<img alt="../_images/vitis_domain.png" src="../_images/vitis_domain.png" />
<p class="caption"><span class="caption-number">Fig. 5.2 </span><span class="caption-text">Application settings should have been already set</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>We will create our own application. So, select Empty Application
and click <em><strong>Finish</strong></em>. The Vitis IDE creates the project and opens the Design perspective.</p></li>
<li><p>In the Project Explorer view, you will see <em><strong>hw5_vitis [Petalinux]</strong></em>.
This is where the host code should be placed. Right-click the <em><strong>src</strong></em> folder
under <em><strong>hw5_vitis [Petalinux]</strong></em>, and select <em><strong>Import Sources</strong></em>.</p></li>
<li><p>Check all the utility codes in <code class="docutils literal notranslate"><span class="pre">ese532_code/hw5/common</span></code> and
click <em><strong>Finish</strong></em>.</p></li>
<li><p>Right-click the <em><strong>src</strong></em> folder again, and similarly import <code class="docutils literal notranslate"><span class="pre">Host.cpp</span></code>
in <code class="docutils literal notranslate"><span class="pre">ese532_code/hw5/</span></code>.</p></li>
<li><p>This time, you want to add the kernel you just generated with Vitis HLS.
You will see <em><strong>hw5_vitis_kernels</strong></em> in the Project Explorer.
Right-click the <em><strong>src</strong></em> folder under
<em><strong>hw5_vitis_kernels</strong></em>, and select <em><strong>Import Sources</strong></em>. Similarly,
add <code class="docutils literal notranslate"><span class="pre">mmult.xo</span></code> to kernel’s src folder and click <em><strong>Finish</strong></em>. You now
have the host application, <code class="docutils literal notranslate"><span class="pre">host.cpp</span></code>, and the Vitis HLS kernel,
<code class="docutils literal notranslate"><span class="pre">mmult.xo</span></code>, in the project.
Click <em><strong>Next</strong></em>.</p>
<div class="figure align-default" id="id3">
<img alt="../_images/vitis_import_src.jpg" src="../_images/vitis_import_src.jpg" />
<p class="caption"><span class="caption-number">Fig. 5.3 </span><span class="caption-text">Import source files</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Double-click kernel project in the Project Exploer to open up
the Hardware Kernel Project Settings.</p></li>
<li><p>In the Hardware Functions section of the Project Settings view, select
<em><strong>Add Hardware Functions</strong></em>.</p></li>
<li><p>You will see mmult function in the <code class="docutils literal notranslate"><span class="pre">mmult.xo</span></code>. Select mmult function
and click <em><strong>OK</strong></em>.</p>
<div class="figure align-default" id="id4">
<img alt="../_images/vitis_hw_xo.jpg" src="../_images/vitis_hw_xo.jpg" />
<p class="caption"><span class="caption-number">Fig. 5.4 </span><span class="caption-text">Add hardware function</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>You will see Active build configuration on the upper right corner.
Set it to <em><strong>Hardware</strong></em>.</p></li>
<li><p>In the Assistant view on the lower-left corner, you will see <em><strong>Hardware</strong></em>
is selected. Right-click <em><strong>Hardware</strong></em> and click <em><strong>build</strong></em>. This process will
take &gt;20 minutes depending on your kernel design.</p></li>
</ul>
</div>
</div>
<div class="section" id="environment-setup">
<h2><span class="section-number">5.2.2. </span>Environment Setup<a class="headerlink" href="#environment-setup" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-up-ultra96-and-host-computer">
<h3><span class="section-number">5.2.2.1. </span>Setting up Ultra96 and Host Computer<a class="headerlink" href="#setting-up-ultra96-and-host-computer" title="Permalink to this headline">¶</a></h3>
<!-- We have provided you with:
- An Ultra96 board with a power cable and a JTAG USB cable
- 2 USB-ethernet adapters
- 1 ethernet cable
- 1 SD card and an SD card reader
- USB-C to USB 3.1 adaptor (for those of you who only have USB-C ports in your computer) -->
<!-- We expect you have a personal computer. If you intend to install
Vitis locally, we expect that your computer has at least:
- 16 GB RAM
- 4 cores
- 70 GB free hard disk space

Otherwise, our suggestion is that you compile your code either
on AWS or Biglab (shown later) and then later copy the binaries
to your personal computer, copy them into the board and finally run them on the board.
 -->
<!-- In the end,  -->
<p>Your setup should look like <a class="reference internal" href="#ultra96-setup-hw5"><span class="std std-numref">Fig. 5.5</span></a>.
We will be using this setup for the rest of the semester.</p>
<!-- You can also use Windows PCs in Detkin/Ketterer. -->
<div class="figure align-default" id="ultra96-setup-hw5">
<a class="reference internal image-reference" href="../_images/env_setup1.jpg"><img alt="../_images/env_setup1.jpg" src="../_images/env_setup1.jpg" style="height: 300px;" /></a>
<p class="caption"><span class="caption-number">Fig. 5.5 </span><span class="caption-text">Development Environment</span><a class="headerlink" href="#ultra96-setup-hw5" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="run-on-the-fpga">
<h3><span class="section-number">5.2.2.2. </span>Run on the FPGA<a class="headerlink" href="#run-on-the-fpga" title="Permalink to this headline">¶</a></h3>
<div class="section" id="write-the-sd-card-image-one-time-setup">
<h4><span class="section-number">5.2.2.2.1. </span>Write the SD Card Image (one time setup)<a class="headerlink" href="#write-the-sd-card-image-one-time-setup" title="Permalink to this headline">¶</a></h4>
<p>Once the build has completed in <a class="reference internal" href="#vitis"><span class="std std-ref">Creating Vitis Project</span></a> section, you will see a generated <code class="docutils literal notranslate"><span class="pre">package</span></code> directory. e.g. <code class="docutils literal notranslate"><span class="pre">hw5_vitis_system/Hardware/package</span></code>.
The package directory contains the following
files that we are interested in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">.</span><span class="n">img</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">BOOT</span><span class="o">.</span><span class="n">BIN</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">boot</span><span class="o">.</span><span class="n">scr</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">image</span><span class="o">.</span><span class="n">ub</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">hw5_vitis</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span>
</pre></div>
</div>
<p>We suggest you to copy files above to your local machine and proceed.
If your laptop is Linux, you can use <code class="docutils literal notranslate"><span class="pre">scp</span></code> and if you are using
Windows you can use programs like <a class="reference external" href="https://winscp.net/eng/index.php">WinSCP</a>.
When you are building for the first time, we will write the
<code class="docutils literal notranslate"><span class="pre">package/sd_card.img</span></code> image to our SD card.</p>
<ul class="simple">
<li><p>Write <code class="docutils literal notranslate"><span class="pre">sd_card.img</span></code> to your SD card.</p>
<ul>
<li><p>In Ubuntu 20.04, you can use <code class="docutils literal notranslate"><span class="pre">Startup</span> <span class="pre">Disk</span> <span class="pre">Creator</span></code>.</p></li>
<li><p>You can also use <a class="reference external" href="https://rufus.ie/">Rufus</a> or
<a class="reference external" href="https://www.balena.io/etcher/">balenaEtcher</a>.</p></li>
</ul>
</li>
<li><p>Once you finish writing the image to the SD card, slide it into your Ultra96’s SD card slot.</p></li>
</ul>
<!-- - First put your SD card into the SD card reader and plug it to your computer.
- In Ubuntu 20.04, you can use `Startup Disk Creator`.
- You can also use [Rufus](https://rufus.ie/) or
      [balenaEtcher](https://www.balena.io/etcher/).
- After it's done, you can verify that there are two partitions in the SD card now:
    - the first partition has the files we mentioned above. These are the files that will change every time we build our code.
    - the second partition contains the Linux rootfs. This will not change. -->
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We will only have to write our SD card image once.
When we recompile our code, the files that will need to be
updated are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">BOOT</span><span class="o">.</span><span class="n">BIN</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">boot</span><span class="o">.</span><span class="n">scr</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">image</span><span class="o">.</span><span class="n">ub</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">hw5_vitis</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span>
</pre></div>
</div>
<p>We will copy those files to the running board using <code class="docutils literal notranslate"><span class="pre">scp</span></code>.
We will then reboot the board, which will load the updated
boot files. The boot files contain the bitstream, which
reconfigures the <em><strong>Programmable Logic</strong></em> of the Ultra96. Hence,
we need a reboot. If you copy the files, but don’t do a reboot,
you will see that your program throws an error.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your Ultra96 is connected to a different machine from the one where
you are running Vitis (e.g., you are running Vitis on a detkin machine,
but your Ultra96 is connected to your laptop), you will need to first
copy the files from the Vitis machine to the Ultra96-host machine and
then copy them from the Ultra96-host to the Ultra96.</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Make sure you don’t hot plug/unplug the SD card. This can potentially corrupt the SD card/damage the board. Always shut down the device first and then insert/take out the SD card. You can shut down the device by typing “poweroff” in the serial console of the device.</p>
</div>
</div>
<div class="section" id="boot-the-ultra96">
<h4><span class="section-number">5.2.2.2.2. </span>Boot the Ultra96<a class="headerlink" href="#boot-the-ultra96" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please make sure you have set the board in SD card mode as follows:</p>
<div class="figure align-default" id="id5">
<a class="reference internal image-reference" href="../_images/sd_card_mode1.jpg"><img alt="../_images/sd_card_mode1.jpg" src="../_images/sd_card_mode1.jpg" style="height: 300px;" /></a>
<p class="caption"><span class="caption-number">Fig. 5.6 </span><span class="caption-text">SD card mode. 1 is OFF and 2 is ON at SW3.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>If you are receiving the boards disassembled,
make sure you have properly connected the JTAG module as follows:</p>
<div class="figure align-default" id="id6">
<a class="reference internal image-reference" href="../_images/jtag1.png"><img alt="../_images/jtag1.png" src="../_images/jtag1.png" style="height: 300px;" /></a>
<p class="caption"><span class="caption-number">Fig. 5.7 </span><span class="caption-text">JTAG module</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<ul>
<li><p>From now on, the setup is really similar to the one in HW4.
But this time, we have something to run on FPGA’s programmable logic!</p></li>
<li><p>Make sure you have the board connected as shown in <a class="reference internal" href="#ultra96-setup-hw5"><span class="std std-numref">Fig. 5.5</span></a>.</p></li>
<li><p>We will use two terminals on our host computer:</p>
<ul class="simple">
<li><p>the first terminal will be used to copy binaries into the Ultra96</p></li>
<li><p>the second terminal will be used to access the serial console of the Ultra96</p></li>
</ul>
</li>
<li><p>We will now open the serial console of the Ultra96. You can use any program like <code class="docutils literal notranslate"><span class="pre">minicom</span></code>, <code class="docutils literal notranslate"><span class="pre">gtkterm</span></code> or <code class="docutils literal notranslate"><span class="pre">PuTTY</span></code> to connect to our serial port. We are using <code class="docutils literal notranslate"><span class="pre">minicom</span></code> and following is the command we use for connecting to the serial port:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">minicom</span> <span class="o">-</span><span class="n">D</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyUSB1</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">/dev/ttyUSB1</span></code> is the port where the Ultra96 dumps all
the console output. If you are on Windows, this will be
something different, like <code class="docutils literal notranslate"><span class="pre">COM4</span></code>. When you want to get out
of <code class="docutils literal notranslate"><span class="pre">minicom</span></code>, use <code class="docutils literal notranslate"><span class="pre">CTRL-A</span> <span class="pre">Z</span> <span class="pre">q</span></code></p>
</li>
<li><p>After you have connected to the serial port, boot the board
by pressing the boot switch as shown in <a class="reference internal" href="#boot"><span class="std std-numref">Fig. 5.8</span></a>.</p>
<div class="figure align-default" id="boot">
<a class="reference internal image-reference" href="../_images/boot1.png"><img alt="../_images/boot1.png" src="../_images/boot1.png" style="height: 300px;" /></a>
<p class="caption"><span class="caption-number">Fig. 5.8 </span><span class="caption-text">Switch for booting Ultra96</span><a class="headerlink" href="#boot" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Watch your serial console for boot messages.</p></li>
<li><p>Note that near the end some messages spill, so just press Enter couple of times, and you see that you need to login. Login as <code class="docutils literal notranslate"><span class="pre">root</span></code> with Password: <code class="docutils literal notranslate"><span class="pre">root</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@u96v2</span><span class="o">-</span><span class="n">sbc</span><span class="o">-</span><span class="n">base</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">~</span><span class="c1">#</span>
</pre></div>
</div>
</li>
<li><p>We will now enable ethernet connection between our Ultra96 and
the host computer, such that we can copy files between
the devices. Issue the following command in the serial console:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ifconfig</span> <span class="n">eth0</span> <span class="mf">10.10.7.1</span> <span class="n">netmask</span> <span class="mf">255.0.0.0</span>
</pre></div>
</div>
</li>
<li><p>Now in your second console in the host computer, first
find out the name that has been assigned to the USB-ethernet
device by issuing <code class="docutils literal notranslate"><span class="pre">ifconfig</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enx000ec6c4b500</span><span class="p">:</span> <span class="n">flags</span><span class="o">=</span><span class="mi">4163</span><span class="o">&lt;</span><span class="n">UP</span><span class="p">,</span><span class="n">BROADCAST</span><span class="p">,</span><span class="n">RUNNING</span><span class="p">,</span><span class="n">MULTICAST</span><span class="o">&gt;</span>  <span class="n">mtu</span> <span class="mi">1500</span>
        <span class="n">inet</span> <span class="mf">10.10.7.2</span>  <span class="n">netmask</span> <span class="mf">255.0.0.0</span>  <span class="n">broadcast</span> <span class="mf">10.255.255.255</span>
        <span class="n">ether</span> <span class="mi">00</span><span class="p">:</span><span class="mi">0</span><span class="n">e</span><span class="p">:</span><span class="n">c6</span><span class="p">:</span><span class="n">c4</span><span class="p">:</span><span class="n">b5</span><span class="p">:</span><span class="mi">00</span>  <span class="n">txqueuelen</span> <span class="mi">1000</span>  <span class="p">(</span><span class="n">Ethernet</span><span class="p">)</span>
        <span class="n">RX</span> <span class="n">packets</span> <span class="mi">213</span>  <span class="nb">bytes</span> <span class="mi">32750</span> <span class="p">(</span><span class="mf">32.7</span> <span class="n">KB</span><span class="p">)</span>
        <span class="n">RX</span> <span class="n">errors</span> <span class="mi">0</span>  <span class="n">dropped</span> <span class="mi">0</span>  <span class="n">overruns</span> <span class="mi">0</span>  <span class="n">frame</span> <span class="mi">0</span>
        <span class="n">TX</span> <span class="n">packets</span> <span class="mi">249</span>  <span class="nb">bytes</span> <span class="mi">25958</span> <span class="p">(</span><span class="mf">25.9</span> <span class="n">KB</span><span class="p">)</span>
        <span class="n">TX</span> <span class="n">errors</span> <span class="mi">0</span>  <span class="n">dropped</span> <span class="mi">0</span> <span class="n">overruns</span> <span class="mi">0</span>  <span class="n">carrier</span> <span class="mi">0</span>  <span class="n">collisions</span> <span class="mi">0</span>
<span class="n">lo</span><span class="p">:</span> <span class="n">flags</span><span class="o">=</span><span class="mi">73</span><span class="o">&lt;</span><span class="n">UP</span><span class="p">,</span><span class="n">LOOPBACK</span><span class="p">,</span><span class="n">RUNNING</span><span class="o">&gt;</span>  <span class="n">mtu</span> <span class="mi">65536</span>
        <span class="n">inet</span> <span class="mf">127.0.0.1</span>  <span class="n">netmask</span> <span class="mf">255.0.0.0</span>
        <span class="n">inet6</span> <span class="p">::</span><span class="mi">1</span>  <span class="n">prefixlen</span> <span class="mi">128</span>  <span class="n">scopeid</span> <span class="mh">0x10</span><span class="o">&lt;</span><span class="n">host</span><span class="o">&gt;</span>
        <span class="n">loop</span>  <span class="n">txqueuelen</span> <span class="mi">1000</span>  <span class="p">(</span><span class="n">Local</span> <span class="n">Loopback</span><span class="p">)</span>
        <span class="n">RX</span> <span class="n">packets</span> <span class="mi">570887</span>  <span class="nb">bytes</span> <span class="mi">920673672</span> <span class="p">(</span><span class="mf">920.6</span> <span class="n">MB</span><span class="p">)</span>
        <span class="n">RX</span> <span class="n">errors</span> <span class="mi">0</span>  <span class="n">dropped</span> <span class="mi">0</span>  <span class="n">overruns</span> <span class="mi">0</span>  <span class="n">frame</span> <span class="mi">0</span>
        <span class="n">TX</span> <span class="n">packets</span> <span class="mi">570887</span>  <span class="nb">bytes</span> <span class="mi">920673672</span> <span class="p">(</span><span class="mf">920.6</span> <span class="n">MB</span><span class="p">)</span>
        <span class="n">TX</span> <span class="n">errors</span> <span class="mi">0</span>  <span class="n">dropped</span> <span class="mi">0</span> <span class="n">overruns</span> <span class="mi">0</span>  <span class="n">carrier</span> <span class="mi">0</span>  <span class="n">collisions</span> <span class="mi">0</span>
</pre></div>
</div>
<p>In our case, the USB-ethernet device is <code class="docutils literal notranslate"><span class="pre">enx000ec6c4b500</span></code>.
Now issue the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">ifconfig</span> <span class="n">enx000ec6c4b500</span> <span class="mf">10.10.7.2</span> <span class="n">netmask</span> <span class="mf">255.0.0.0</span>
</pre></div>
</div>
</li>
<li><p>We have now assigned IP <code class="docutils literal notranslate"><span class="pre">10.10.7.1</span></code> to our Ultra96 and IP <code class="docutils literal notranslate"><span class="pre">10.10.7.2</span></code> to our USB ethernet device connected to our host computer.
You can test the connection by doing <code class="docutils literal notranslate"><span class="pre">ping</span> <span class="pre">10.10.7.2</span></code> from the Ultra96 serial console, and doing <code class="docutils literal notranslate"><span class="pre">ping</span> <span class="pre">10.10.7.1</span></code> from the host
computer.</p></li>
<li><p>If you haven’t already done so, you can now use scp to copy files from
package/ to /mnt/sd-mmcblk0p1/ on the Ultra96.</p></li>
<li><p>On the serial console, you can now run your code as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span>
<span class="n">export</span> <span class="n">XILINX_XRT</span><span class="o">=/</span><span class="n">usr</span>
<span class="o">./</span><span class="n">hw5_vitis</span> <span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span>
</pre></div>
</div>
<p>You should see the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@u96v2</span><span class="o">-</span><span class="n">sbc</span><span class="o">-</span><span class="n">base</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span><span class="c1"># ./hw5_vitis binary_container_1.xclbin</span>
<span class="n">Loading</span><span class="p">:</span> <span class="s1">&#39;binary_container_1.xclbin&#39;</span>
<span class="n">TEST</span> <span class="n">PASSED</span>
</pre></div>
</div>
</li>
<li><p>Let’s copy another file. Copy the <code class="docutils literal notranslate"><span class="pre">xrt.ini</span></code> file from your computer to the <code class="docutils literal notranslate"><span class="pre">/mnt/sd-mmcblk0p1</span></code> directory of the Ultra96 as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="n">xrt</span><span class="o">.</span><span class="n">ini</span> <span class="n">root</span><span class="o">@</span><span class="mf">10.10.7.1</span><span class="p">:</span><span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span><span class="o">/</span>
</pre></div>
</div>
<p>The default password of the device is <code class="docutils literal notranslate"><span class="pre">root</span></code> (you can setup ssh keys so that you don’t have to type the passwords all the time).</p>
</li>
<li><p>Now re-run the program as before. You should now see the generated files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span><span class="o">.</span><span class="n">run_summary</span>
<span class="n">profile_summary</span><span class="o">.</span><span class="n">csv</span>
<span class="n">timeline_trace</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</li>
<li><p>Copy these files to your computer by issuing the following command. Modify the command with the username of your computer and
the directory you want to put the files in.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span><span class="o">.</span><span class="n">run_summary</span> <span class="n">timeline_trace</span><span class="o">.</span><span class="n">csv</span> <span class="n">profile_summary</span><span class="o">.</span><span class="n">csv</span> <span class="n">lilbirb</span><span class="o">@</span><span class="mf">10.10.7.2</span><span class="p">:</span><span class="o">/</span><span class="n">media</span><span class="o">/</span><span class="n">lilbirb</span><span class="o">/</span><span class="n">research</span><span class="o">/</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your Ultra96 is connected to a different machine from the one where
you are running Vitis (e.g., you are running Vitis on a detkin machine,
but your Ultra96 is connected to your laptop), you will need to first
copy the files the Ultra96-host machine as above, then copy from the Ultra96-host machine
to the Vitis machine.</p>
</div>
<ul>
<li><p>You can now use Vitis Analayzer in your host computer to view the trace by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_analyzer</span> <span class="o">./</span><span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span><span class="o">.</span><span class="n">run_summary</span>
</pre></div>
</div>
</li>
<li><p>When you modify your HLS code, that will cause the hardware to
change, and hence the following files will need to be copied to
the <code class="docutils literal notranslate"><span class="pre">/mnt/sd-mmcblk0p1</span></code> directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">BOOT</span><span class="o">.</span><span class="n">BIN</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">boot</span><span class="o">.</span><span class="n">scr</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">image</span><span class="o">.</span><span class="n">ub</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">hw5_vitis</span>
<span class="n">package</span><span class="o">/</span><span class="n">sd_card</span><span class="o">/</span><span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span>
</pre></div>
</div>
<p>After you copy these files, type <code class="docutils literal notranslate"><span class="pre">reboot</span></code> in the serial
console and that will reprogram the device.
Note that everytime you reboot the device, you will
need to issue the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">XILINX_XRT</span><span class="o">=/</span><span class="n">usr</span>
<span class="n">ifconfig</span> <span class="n">eth0</span> <span class="mf">10.10.7.1</span> <span class="n">netmask</span> <span class="mf">255.0.0.0</span>
</pre></div>
</div>
<p>You can put these commands in your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> of the Ultra96 (use <code class="docutils literal notranslate"><span class="pre">vim</span></code> to edit this file in Ultra96), so that
you don’t have to type it all the time.</p>
</li>
<li><p>When you only modify your host code, you don’t have to copy any of the files mentioned above and only neeed to copy the
OpenCL host binary, which is <code class="docutils literal notranslate"><span class="pre">hw5_vitis</span></code> in this example. You also don’t need to reboot the device in that case.</p></li>
</ul>
<p>This concludes a top-down walk-through of the steps involved
in running a hardware function on the Ultra96.</p>
</div>
<div class="section" id="boot-the-ultra96-for-windows-users-only">
<h4><span class="section-number">5.2.2.2.3. </span>Boot the Ultra96 (for Windows users only)<a class="headerlink" href="#boot-the-ultra96-for-windows-users-only" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Connect your ultra96 jtag usb to your computer. Also connect the ethernet-usb to ultra96 and the computer. Go to device managers and note down the serial port of the usb. In the example case, it’s COM4.</p>
<div class="figure align-default" id="id7">
<img alt="../_images/win_eth_01.jpg" src="../_images/win_eth_01.jpg" />
<p class="caption"><span class="caption-number">Fig. 5.9 </span><span class="caption-text">Find the port</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Download and install MobaXterm from <a class="reference external" href="https://download.mobatek.net/2042020100805218/MobaXterm_Installer_v20.4.zip">here</a>.</p></li>
<li><p>Start MobaXterm. Click <em><strong>Session</strong></em> in the left top corner and select <em><strong>Serial</strong></em>.
Set the serial port as the one you found in the previous step and bps. In the example case,
it’s COM4 and 115200. Click <em><strong>OK</strong></em>.</p></li>
<li><p>Boot the board by pressing the boot switch as shown in <a class="reference internal" href="#boot"><span class="std std-numref">Fig. 5.8</span></a>.</p></li>
<li><p>Note that near the end some messages spill, so just press Enter couple of times, and you see that you need to login. Login as <code class="docutils literal notranslate"><span class="pre">root</span></code> with Password: <code class="docutils literal notranslate"><span class="pre">root</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@u96v2</span><span class="o">-</span><span class="n">sbc</span><span class="o">-</span><span class="n">base</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">~</span><span class="c1">#</span>
</pre></div>
</div>
</li>
<li><p>In the local machine’s session, type ifconfig and find out the ip address and netmask assigned to the USB-ethernet device. Following is the example:</p>
<div class="figure align-default" id="id8">
<img alt="../_images/win_eth_11.jpg" src="../_images/win_eth_11.jpg" />
<p class="caption"><span class="caption-number">Fig. 5.10 </span><span class="caption-text">ifconfig to find out your local machine’s ip</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Assign your Ultra96 an ip address on the same subnet as the USB-ethernet, e.g. from the
previous step, the ip address of the local machine is <code class="docutils literal notranslate"><span class="pre">169.254.123.23</span></code> and netmask is
<code class="docutils literal notranslate"><span class="pre">255.255.0.0</span></code>. So, let’s assign the ultra96 to a ip of <code class="docutils literal notranslate"><span class="pre">169.254.123.24</span></code>(<strong>note that
this is 24!</strong>) as follows:</p>
<div class="figure align-default" id="id9">
<img alt="../_images/win_eth_21.jpg" src="../_images/win_eth_21.jpg" />
<p class="caption"><span class="caption-number">Fig. 5.11 </span><span class="caption-text">Connect you machine and Ultra96</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Your devices are not connected. Go to the local machine’s tab and ssh into the Ultra96:</p>
<div class="figure align-default" id="id10">
<img alt="../_images/win_eth_31.jpg" src="../_images/win_eth_31.jpg" />
<p class="caption"><span class="caption-number">Fig. 5.12 </span><span class="caption-text">ssh in to the Ultra96 and transfer files</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>If you haven’t already done so, you can now use WinSCP to copy files from
BOOT to /mnt/sd-mmcblk0p1 on the Ultra96.</p></li>
<li><p>On the serial console, you can now run your code as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span>
<span class="n">export</span> <span class="n">XILINX_XRT</span><span class="o">=/</span><span class="n">usr</span>
<span class="o">./</span><span class="n">hw5_vitis</span> <span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span>
</pre></div>
</div>
<p>You should see the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@u96v2</span><span class="o">-</span><span class="n">sbc</span><span class="o">-</span><span class="n">base</span><span class="o">-</span><span class="mi">2020</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">sd</span><span class="o">-</span><span class="n">mmcblk0p1</span><span class="c1"># ./hw5_vitis binary_container_1.xclbin</span>
<span class="n">Loading</span><span class="p">:</span> <span class="s1">&#39;binary_container_1.xclbin&#39;</span>
<span class="n">TEST</span> <span class="n">PASSED</span>
</pre></div>
</div>
</li>
<li><p>You can see that you can view the files of the Ultra96 on the left hand side.
You can easily drag and drop files from/to the local machine to/from Ultra96.
Copy <code class="docutils literal notranslate"><span class="pre">xrt.ini</span></code> file from your computer to the <code class="docutils literal notranslate"><span class="pre">/mnt/sd-mmcblk0p1</span></code> directory
of the Ultra96.</p></li>
<li><p>Now re-run the program as before. You should now see the generated files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">binary_container_1</span><span class="o">.</span><span class="n">xclbin</span><span class="o">.</span><span class="n">run_summary</span>
<span class="n">profile_summary</span><span class="o">.</span><span class="n">csv</span>
<span class="n">timeline_trace</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</li>
<li><p>Copy these files back to your local machine and analyze with Vitis Analyzer.</p>
<!-- If you installed Vitis on Windows, launch Vitis first and ***Xilinx*** $\rightarrow$ ***Vitis Shell*** to launch the shell. Then `vitis_analyer` to launch vitis_analyzer. -->
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="reference">
<h2><span class="section-number">5.2.3. </span>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<!-- - <https://github.com/Xilinx/Vitis-AWS-F1-Developer-Labs/blob/master/setup/instructions.md>
- <https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-service.html>
- <https://www.ni-sp.com/setting-up-access-to-the-nice-dcv-license-in-ec2/>
- <https://github.com/aws/aws-fpga/blob/master/Vitis/docs/Setup_AWS_CLI_and_S3_Bucket.md>
 -->
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/Xilinx/Vitis-Tutorials/tree/master/Getting_Started">https://github.com/Xilinx/Vitis-Tutorials/tree/master/Getting_Started</a></p></li>
<li><p><a class="reference external" href="https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/vitis_hls_analysis/using_the_kernel.html">https://xilinx.github.io/Vitis-Tutorials/2020-1/docs/vitis_hls_analysis/using_the_kernel.html</a></p></li>
</ul>
<!-- - <https://github.com/Xilinx/Vitis-Tutorials/blob/master/docs/Pathway3/BuildingAnApplication.md>
 -->
 <!-- - <https://github.com/aws/aws-fpga/blob/master/Vitis/README.md>
 -->
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./hw5"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="collaboration.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">5.1. </span>Collaboration</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="homework_submission.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">5.3. </span>Homework Submission</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Department of Electrical and Systems Engineering<br/>
        
            &copy; Copyright 2021 Department of Electrical and Systems Engineering at the University of Pennsylvania.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>